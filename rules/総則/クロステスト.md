# クロステスト
## 概要
サンドボックスにダメージを与える特殊な処理をクロステストと呼ぶ。

## ルール
クロステストを行うことで、サンドボックスの保護力を減らすことができる。クロステストを行うことが出来るのは、基本的に財団上のオブジェクトのみであり、プレイヤーのメインフェイズかつスタックが空で優先権をそのプレイヤーが持っている場合にのみである。また、1つのオブジェクトがクロステストを行えるのは1ターンに1度のみである。

以下にクロステストの流れを示す。
1. クロステスト宣言
クロステスト宣言では、クロステストを行うことを宣言し、クロステストを行うオブジェクトとクロステスト対象を決定する。プレイヤーは、そのプレイヤーのメインフェイズかつスタックが空で優先権をそのプレイヤーが持っている場合にクロステスト宣言ができる。まず、プレイヤーはクロステストを行うオブジェクトとしてそのプレイヤーのコントロールするオブジェクトを選択する。この際このターンクロステストを行っているオブジェクトを宣言することはできない。その後、クロステスト対象として対戦相手がオーナーであるサンドボックスを1つ選択する。クロステスト宣言が終了すると、クロステストがスタックに積まれる。

2. クロステスト処理
スタックに積まれたクロステストが通常のスタックの処理に従い解決される。まず、そのクロステストの持つ識別子の情報に従いサイト上のオブジェクトを探索する。オブジェクトが見つかった場合、そのオブジェクトの確保力と同じ値だけ、クロステスト対象の保護力を減らす。この際そのサンドボックスから収容違反が発生することがある。なお、これをクロステストが正常に行われたという。見つからなかった場合、この時点でクロステストは終了しスタックから取り除かれる。

スタックに積まれたクロステストは、クロステストを行うオブジェクトの識別子とクロステスト対象の情報を持つ。このため、クロステスト宣言の後、クロステストを行うオブジェクトがサイト上を離れ再度サイト上に戻ってきた場合、オブジェクトの識別子が変化しているためクロステストの際にオブジェクトの探索に失敗しクロステストがスタックから取り除かれる。これはクロステストを行ったことにはならないため、後述のクロステストをした時のタイミングは訪れない。

クロステストする時のタイミングはクロステスト宣言に成功し、スタックにクロステストが乗った時である。そのため、このタイミングで誘発する効果はクロステストがスタックに乗った後に発動する。一方、クロステストした時のタイミングはクロステストが正常に行われてそのクロステストがスタックから取り除かれた時である。よって、このタイミングで誘発する効果はクロステストが終了した後に発動する。なお、クロステストが正常に終了したことが条件の為、何らかの効果でクロステストが無効になったり上述のようにクロステストを行うオブジェクトを発見できなかった場合はそのタイミングは訪れない。

クロステスト宣言が終了すると、その時点でクロステストは行われたと見做される。よって、効果によってスタックに積まれたクロステストが無効になったからと言って、同ターン中に再度そのクロステストを行ったオブジェクトがクロステストを宣言することはできない。

クロステストができないとは、クロステスト宣言が行えないことをいう。

クロステストをする代わりに～する効果は置換効果であり、スタックに乗ったクロステストの処理を別の処理に変更する置換する。よって、クロステストは行われたことになるため上述の通り同ターンに再度クロステストはできない。







スタックに積まれたそのクロステストは、情報としてクロステストを行うオブジェクトの識別子とクロステスト対象を持つ。